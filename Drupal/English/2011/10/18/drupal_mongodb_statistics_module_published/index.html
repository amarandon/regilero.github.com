<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title> Drupal - Mongodb statistics module published |  RBleug</title>
    <meta name="description" content="Regilero's blog; Mostly tech things about web stuff."/>
    <meta name="author" content="regilero"/>
    <link rel="author" href="/contact/" title="who am I?" type="text/html" />
    <link rel="icon" type="image/x-icon" href="/theme/img/regilero.ico" />
    <link rel="shortcut icon" type="image/x-icon" href="/theme/img/regilero.ico" />
    <link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/feed.xml" />
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
    <script src="/theme/js/effects.js" ></script>
    <script src="/theme/js/jquery.parallax.min.js"></script>
    <link rel="stylesheet" href="/theme/blueprint/screen.css" type="text/css" media="screen, projection">
    <link rel="stylesheet" href="/theme/blueprint/print.css" type="text/css" media="print">
    <link rel="stylesheet" href="/theme/syntax.css" type="text/css" />
    <!--[if lt IE 8]>
      <link rel="stylesheet" href="/theme/blueprint/ie.css" type="text/css" media="screen, projection">
    <![endif]-->
    <link rel="stylesheet" href="/theme/blueprint/plugins/link-icons/screen.css" type="text/css" media="screen, projection">
    <link rel="stylesheet" href="/theme/fontello/css/fontello.css">
    <!--[if IE 7]><link rel="stylesheet" href="/theme/fontello/css/fontello-ie7.css"><![endif]-->
    <link href="/theme/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-40859893-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
  </head>
  <body>

    <div id="mastercontainer" class="container">
       <div id="branding" class="column span-24 last">
         <div id="brandingcontent">
           <h1 class="logo"><a href="/">RBleug</a></h1>
           <hr/>
           <h2 class="alt">Regilero's blog; Mostly tech things about web stuff.</h2>
         </div>
       </div>
       
       <div id="menu" class="column span-24 last">
         <ul class="topNav">
            <li><a href="/" class="topNavAct" ><i class="icon-home"></i>Tech notes</a></li>
            <li><a href="/archive/"   ><i class="icon-th"></i>Archives</a></li>
            <li><a href="/contact/"  ><i class="icon-phone"></i>Contact</a></li>
            <li><a href="/feed.xml"><i class="icon-rss"></i>RSS Feed</a></li>
         </ul>
         <div class="clear"></div>
       </div>
       
       <div id="content" class="">
         <div id="left-content" class="column span-15 prepend-1">
             
          <article>
        <header>
            <h1>Drupal - Mongodb statistics module published
            <br/><span><i class="icon-clock"></i><time datetime="2011-10-18">Oct 18, 2011</time></span>
            <span class="category"><i class="icon-list"></i> <a href="/Drupal/">Drupal</a> and <a href="/English/">English</a></span>
            </h1>
        </header>

        <div class="entry">
          <img class="right" src="/theme/img/pic/flower2.png" width="260" alt="mongodb-statistics module for drupal is a replacement for core statistics module using an ajax callback tracker." title="mongodb-statistics module for drupal is a replacement for core statistics module using an ajax callback tracker." />
          <h3>What is this about?</h3>

<p>Just a few words, as I've other some things to do.</p>

<p>I've just published a development version of <a href="http://github.com/regilero/drupal_mongodb_statistics">mongodb-statistics</a> on github.</p>

<p>This module is a first try on replacing heavy MySQL operations done by the core statistics module.</p>

<p>It's copy-and-alter of the core statistics module, with some additions.
So it's not the nicest piece of code I could write :-)</p>

<p>On the things added :</p>

<ul>
<li>batch migration of previous node_counter statistics if any (not yet for accesslog)</li>
<li>post-synchronisation of node_counter mongodb table to a sql table (via cron), so that you could query it via views (not for accesslog, are you mad?)</li>
<li>time based caching of the popular content block</li>
<li>Still lot of thing to do (see the <a href="https://github.com/regilero/drupal_mongodb_statistics/blob/master/mongodb_statistics/TODO.txt">TODO</a>) but it was a nice way to learn <strong>mongodb</strong>. I especially like the idea of <a href="http://nosql.mypopescu.com/post/392418792/translate-sql-to-mongodb-mapreduce">mapReduce</a> functions applied for complex <code>GROUP BY</code> equivalents.</li>
</ul>


        </div>
        <div class="tag"><i class="icon-tag"></i><a href="/tag/Drupal/">Drupal</a>, <i class="icon-tag"></i><a href="/tag/Mongodb/">Mongodb</a>, <i class="icon-tag"></i><a href="/tag/PHP/">PHP</a>, <i class="icon-tag"></i><a href="/tag/Performance/">Performance</a>, <i class="icon-tag"></i><a href="/tag/Statistics/">Statistics</a></div>
</article>
<hr/>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: * * */
    var disqus_shortname = "regilero";
    var disqus_identifier = 'fd77f142-4f70-4268-9668-a252db9b0ff3';
    var disqus_title = "Drupal - Mongodb statistics module published";
    var disqus_url = 'http://regilero.github.io/Drupal/English/2011/10/18/drupal_mongodb_statistics_module_published/';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    
    
         </div>
         <div id="sideBar" class="column span-8 last">
            <div id="deco">
              <div class="parallax-viewport">
                 <!-- Seven image layers, each layer slightly bigger than the one behind, making 'closer' layers move faster. -->
                 <img class="parallax-layer" src="/theme/img/parallax/0.gif" alt="" style="width:310px; height:825px;"/>
                 <img class="parallax-layer" src="/theme/img/parallax/1.gif" alt="" style="width:320px; height:850px;"/>
                 <img class="parallax-layer" src="/theme/img/parallax/2.gif" alt="" style="width:350px; height:900px;"/>
                 <img class="parallax-layer" src="/theme/img/parallax/4.gif" alt="" style="width:360px; height:950px;"/>
                 <img class="parallax-layer" src="/theme/img/parallax/6.gif" alt="" style="width:400px; height:1000px;"/>
               </div>
             </div>
            <div id="sideBarContent"> 
              
              <div class="sideBarListBox">
                <h3>Related posts</h3>
                <ul>
                  
                     <li><a href="/Drupal/English/2011/10/03/separate_cache_backends_d6_and_d7/">Separate cache Backends with Drupal6 and Drupal7.</a></li>
                  
                     <li><a href="/Drupal/English/2011/09/01/better_rewrite_rules_for_drupal/">Better rewriteRules for Drupal</a></li>
                  
                     <li><a href="/Drupal/English/2013/05/16/Warning_chrooted_php_fpm_and_apc/">Warning Chrooted php-fpm and Apc with multiple pools</a></li>
                  
                     <li><a href="/Drupal/English/2011/09/03/Install_drupal_in_php_fpm_fastcgi_and_apache_chroot/">Install Drupal in php-fpm (fastcgi) with Apache and a chroot php-fpm</a></li>
                  
                     <li><a href="/Drupal/English/2011/09/02/Tune_your_php_settings_for_drupal/">Tune your php settings for Drupal</a></li>
                  
                </ul>
              </div>
              
      
            <div class="sideBarListBox">
              <h3>Latest posts</h3>
              <ul>
                  
                     <li><a href="/SaltStack/English/2014/01/20/saltstack_step_by_step_file_blockreplace/">SaltStack, Manage entries in unmanaged files with File Blockreplace</a></li>
                  
                     <li><a href="/Drupal/English/2013/05/16/Warning_chrooted_php_fpm_and_apc/">Warning Chrooted php-fpm and Apc with multiple pools</a></li>
                  
                     <li><a href="/Drupal/English/2011/10/18/drupal_mongodb_statistics_module_published/">Drupal - Mongodb statistics module published</a></li>
                  
                     <li><a href="/Drupal/English/2011/10/03/separate_cache_backends_d6_and_d7/">Separate cache Backends with Drupal6 and Drupal7.</a></li>
                  
                     <li><a href="/Drupal/English/2011/09/03/Install_drupal_in_php_fpm_fastcgi_and_apache_chroot/">Install Drupal in php-fpm (fastcgi) with Apache and a chroot php-fpm</a></li>
                  
              </ul>
            </div>
            
            <div class="sideBarListBox">
              <h3>Tags</h3>
              <div class="tagcloud">
              <a style='font-size: 12px' class='taglink' href='/tag/Monitoring/'>Monitoring</a>
<a style='font-size: 12px' class='taglink' href='/tag/ZendFramework/'>ZendFramework</a>
<a style='font-size: 12px' class='taglink' href='/tag/Mongodb/'>Mongodb</a>
<a style='font-size: 12px' class='taglink' href='/tag/SaltStack/'>SaltStack</a>
<a style='font-size: 29px' class='taglink' href='/tag/HTTP/'>HTTP</a>
<a style='font-size: 12px' class='taglink' href='/tag/Cache/'>Cache</a>
<a style='font-size: 30px' class='taglink' href='/tag/Performance/'>Performance</a>
<a style='font-size: 12px' class='taglink' href='/tag/Bash/'>Bash</a>
<a style='font-size: 12px' class='taglink' href='/tag/BlockReplace/'>BlockReplace</a>
<a style='font-size: 19px' class='taglink' href='/tag/PostgreSQL/'>PostgreSQL</a>
<a style='font-size: 30px' class='taglink' href='/tag/Drupal/'>Drupal</a>
<a style='font-size: 32px' class='taglink' href='/tag/PHP/'>PHP</a>
<a style='font-size: 12px' class='taglink' href='/tag/Linux/'>Linux</a>
<a style='font-size: 12px' class='taglink' href='/tag/Js/'>Js</a>
<a style='font-size: 19px' class='taglink' href='/tag/APC/'>APC</a>
<a style='font-size: 12px' class='taglink' href='/tag/Bug/'>Bug</a>
<a style='font-size: 23px' class='taglink' href='/tag/Proxy/'>Proxy</a>
<a style='font-size: 19px' class='taglink' href='/tag/PHP-fpm/'>PHP-fpm</a>
<a style='font-size: 12px' class='taglink' href='/tag/Nginx/'>Nginx</a>
<a style='font-size: 19px' class='taglink' href='/tag/Web/'>Web</a>
<a style='font-size: 12px' class='taglink' href='/tag/js/'>js</a>
<a style='font-size: 19px' class='taglink' href='/tag/RewriteMap/'>RewriteMap</a>
<a style='font-size: 12px' class='taglink' href='/tag/Dojo/'>Dojo</a>
<a style='font-size: 30px' class='taglink' href='/tag/Apache/'>Apache</a>
<a style='font-size: 12px' class='taglink' href='/tag/Ajax/'>Ajax</a>
<a style='font-size: 12px' class='taglink' href='/tag/Statistics/'>Statistics</a>
<a style='font-size: 23px' class='taglink' href='/tag/mod_rewrite/'>mod_rewrite</a>
<a style='font-size: 26px' class='taglink' href='/tag/Security/'>Security</a>
<a style='font-size: 12px' class='taglink' href='/tag/HTML5/'>HTML5</a>
<a style='font-size: 19px' class='taglink' href='/tag/Plone/'>Plone</a>

              </div>
            </div>
          </div> <!-- end sideBarContent -->
            
            <div class="sideBarMore">
              <h3>More</h3>
                <a href="http://www.flickr.com/photos/regilero/" target="_blank"><img src="/theme/img/flickr_thumb.png" width="48" height="48" alt="Flickr photos" title="Flickr photos"></a>
                <a href="https://github.com/regilero" target="_blank"><img src="/theme/img/github_thumb.png" width="48" height="48" alt="Github regilero" title="Github regilero"></a>
                <a href="https://plus.google.com/111280074129555323484?rel=author" target="_blank"><img src="/theme/img/google-plus-thumb.png" width="48" height="48" alt="G+" title="G+"></a>
                <a href="http://stackoverflow.com/users/550618/regilero" target="_blank"><img src="http://stackoverflow.com/users/flair/550618.png" width="208" height="58" alt="profile for regilero at Stack Overflow, Q&amp;A for professional and enthusiast programmers" title="profile for regilero at Stack Overflow, Q&amp;A for professional and enthusiast programmers"></a>
                <a href="http://stackexchange.com/users/264377/regilero"  target="_blank"><img src="http://stackexchange.com/users/flair/264377.png?theme=clean" width="208" height="58" alt="profile for regilero on Stack Exchange, a network of free, community-driven Q&amp;A sites" title="profile for regilero on Stack Exchange, a network of free, community-driven Q&amp;A sites" /></a>
                <p>Follow me also on <a rel="me" href="http://makina-corpus.org/blogs/regilero">makina-corpus.org</a>.</p>
            </div>
            <div class="sideBarItem">
              <h3>Friends</h3>
                <ul>
                  <li><a class="effect" target="_blank" href="http://www.makina-corpus.org">Blogs Makina Corpus<div class="cover-right"><img src="/theme/img/makinaorg.png" height="30" width="30"><img src="/theme/img/makinaorg_banner.png" height="30" width="117"></div></a></li>
                  <li><a class="effect" target="_blank" href="http://www.makina-corpus.com">Makina Corpus<div class="cover-right"><img src="/theme/img/makinacom.png" height="30" width="30"><img src="/theme/img/makinacom_banner.png" height="30" width="117"></div></a></li>
                  <li><a class="effect" target="_blank" href="http://www.processus.org/">Pounard, processus.org<div class="cover-right"><img src="/theme/img/pounard.png" height="30" width="30"><img src="/theme/img/pounard_banner.png" height="30" width="117"></div></a></li>
                  <li><a class="effect" target="_blank" href="http://toutpt.makina-corpus.org/" >Toupt<div class="cover-right"><img src="/theme/img/toupt.png" height="30" width="30"><img src="/theme/img/toupt_banner.png" height="30" width="117"></div></a></li>
                  <li><a class="effect" target="_blank" href="http://francoisgaudin.com/">François Gaudin<div class="cover-right"><img src="/theme/img/gaudin.png" height="30" width="30"><img src="/theme/img/gaudin_banner.png" height="30" width="117"></div></a></li>
                </ul>
                <div class="clear"></div>
            </div>
         </div> <!-- end sidebar -->
        
       </div><!-- end content -->
         
       <div id="footer" class="column span-24 last">
          <hr />
          <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/fr/"><img alt="Licence Creative Commons" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/fr/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type">regilero's blog</span> est mis à disposition selon les termes de la <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/fr/">licence Creative Commons Attribution -  Partage dans les Mêmes Conditions 3.0 France</a>.<br />Fondé(e) sur une œuvre à <a xmlns:dct="http://purl.org/dc/terms/" href="http://regilero.github.io" rel="dct:source">http://regilero.github.io</a>.
       </div>

      </div><!-- end container -->
    </body>
</html>
